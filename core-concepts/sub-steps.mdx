---
title: Sub-steps
description: Breaking down complex steps into smaller operations
---

**Sub-steps** break down complex steps into smaller, trackable operations within a parent step.

<Tabs>
<Tab title="Node.js">
```javascript
// Track granular operations within a step
const paymentStep = thread.step('payment_processed');

try {
  paymentStep.subStep('validate_card', { cardType: 'visa' }, 'success');
  paymentStep.subStep('check_fraud', { fraudScore: 0.15 }, 'success');
  paymentStep.subStep('authorize_payment', { authCode: 'AUTH-123' }, 'success');
  
  await paymentStep
    .addContext({ totalAmount: 299.99 })
    .success();
    
} catch (error) {
  paymentStep.subStep('error_handler', { error: error.message }, 'failed');
  await paymentStep.failed({ message: 'Payment failed' });
}
```
</Tab>
<Tab title="Go">
```go
// Track granular operations within a step
paymentStep := thread.Step("payment_processed")

err := processPayment()
if err != nil {
    paymentStep.SubStep("error_handler", map[string]any{"error": err.Error()}, "failed")
    _, stepErr := paymentStep.Failed(ctx, map[string]any{"message": "Payment failed"})
    if stepErr != nil {
        log.Fatal(stepErr)
    }
    return
}

paymentStep.SubStep("validate_card", map[string]any{"cardType": "visa"}, "success")
paymentStep.SubStep("check_fraud", map[string]any{"fraudScore": 0.15}, "success")
paymentStep.SubStep("authorize_payment", map[string]any{"authCode": "AUTH-123"}, "success")

_, err = paymentStep.
    AddContext(map[string]any{"totalAmount": 299.99}).
    Success(ctx)
if err != nil {
    log.Fatal(err)
}
```
</Tab>
</Tabs>

### When to Use

| Use Case | Description |
|----------|-------------|
| **Complex operations** | Multiple distinct actions within one step |
| **Debugging visibility** | Need to see intermediate progress |
| **Performance analysis** | Identify bottlenecks within steps |

### Key Differences from Steps

| Feature | Step | Sub-step |
|---------|------|----------|
| **Scope** | Thread-level | Within a step |
| **Validation** | Contract rules apply | No validation |
| **Notifications** | Triggers events | No events |

