---
title: 'Handling Failures'
description: 'Properly handle and record step failures in your workflows'
---

### Recording Failures

<CodeGroup>

```javascript JavaScript
const step = thread.step('payment_processed');

try {
  const payment = await processPayment(orderId);
  await step.addContext(payment).success();
} catch (error) {
  await step.failed({ 
    message: error.message,
    errorCode: 'PAYMENT_FAILED',
    retryable: true
  });
}
```

```go Go
paymentStep := thread.Step("payment_processed")
payment, err := processPayment(orderId)
if err != nil {
    _, stepErr := paymentStep.Failed(ctx, map[string]any{
        "message":   err.Error(),
        "errorCode": "PAYMENT_FAILED",
        "retryable": true,
    })
    if stepErr != nil {
        log.Fatal(stepErr)
    }
    return
}
_, err = paymentStep.AddContext(payment).Success(ctx)
if err != nil {
    log.Fatal(err)
}
```

</CodeGroup>

### Retry Tracking

Each retry attempt is automatically tracked in step history for debugging.

### Next Steps

<CardGroup cols={2}>
  <Card title="External References" icon="link" href="/core-concepts/external-references">
    Link workflows to external systems
  </Card>
  <Card title="Sub-steps" icon="list-tree" href="/core-concepts/sub-steps">
    Break down complex operations
  </Card>
</CardGroup>
