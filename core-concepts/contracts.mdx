---
title: Contracts
description: Business rules and validation logic for Threadify threads
---

**Contracts** define business rules and validation logic that enforce how steps should execute and relate to each other. They provide real-time validation and ensure business processes follow defined patterns.

### Contract Properties

- **Name** - Unique identifier for the contract
- **Version** - Supports contract evolution
- **Rules** - Validation logic for steps and transitions
- **Entry Points** - Valid starting steps
- **Terminal Steps** - Steps that complete the thread
- **Timeouts** - Maximum duration for steps and threads

### Contract Rules

Contracts can validate:

- **Step data** - Required fields and data formats
- **Step sequences** - Which steps can follow others
- **Time limits** - Maximum execution time for steps and threads
- **Business logic** - Custom validation rules

### Example Contract

<Tabs>
<Tab title="YAML">
```yaml
contract_name: inventory_delivery_v3
version: 3
description: Complete product delivery workflow

# Entry points - where threads can start
entry_points:
  - order_placed

# Parties involved in the workflow
parties:
  - merchant
  - payment_processor
  - warehouse_manager

# Steps in the workflow
steps:
  - id: order_placed
    owner: merchant
    type: managed
    timeout: 5m
    business_context:
      required:
        - order_id
        - customer_id
        - total_amount

  - id: payment_validation
    owner: payment_processor
    type: external
    timeout: 30s
    business_context:
      required:
        - payment_method
        - amount

  - id: shipped
    owner: logistics_carrier
    type: managed
    timeout: 24h
    business_context:
      required:
        - tracking_number
        - carrier_name

# Transitions define valid step flows
transitions:
  - from: order_placed
    to:
      - payment_validation

  - from: payment_validation
    to:
      - payment_validated
      - order_cancelled
    can_retry: true

# Terminal steps - where threads can end
terminal_steps:
  - delivered
  - order_cancelled
```
</Tab>
</Tabs>

## Contract Benefits

- **Real-time validation** - Rules checked as steps execute
- **Business enforcement** - Ensure processes follow requirements
- **Error prevention** - Catch violations before they cause issues
- **Documentation** - Contracts serve as living documentation

### Example Usage

<Tabs>
<Tab title="Node.js">
```javascript
// Use latest contract version
const thread = await connection.start('order_fulfillment', 'merchant');

// Or specific version
const threadV2 = await connection.start('order_fulfillment:2', 'merchant');

// Contract validates entry points, required fields, and transitions
await thread.step('order_placed')
  .addContext({ order_id: 'ORD-123', product_id: 'PROD-456', quantity: 2 })
  .success();

// Violations trigger WebSocket notifications to authorized members
```
</Tab>
</Tabs>

