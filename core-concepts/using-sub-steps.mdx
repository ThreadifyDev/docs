---
title: 'Using Sub-steps'
description: 'Break down complex operations into granular sub-steps for better debugging and visibility'
---

**Sub-steps** allow you to break down complex steps into smaller, trackable operations within a parent step. They provide fine-grained visibility into complex operations while maintaining the overall step context.

### When to Use Sub-steps

- **Complex operations** - Multiple distinct actions within one step
- **Parallel execution** - Running multiple operations concurrently
- **Debugging visibility** - Need to see intermediate progress
- **Performance analysis** - Identify bottlenecks within steps

### Sub-step Properties

- **Parent step** - Associated with a main step
- **Unique name** - Within the parent step context
- **Independent status** - Can succeed or fail independently
- **Timestamps** - Track execution timing
- **Context data** - Specific to the sub-step operation

### Sub-step vs Step

<table className="w-full">
  <thead>
    <tr className="border-b border-gray-300">
      <th className="text-left font-semibold py-2 pr-4">Feature</th>
      <th className="text-left font-semibold py-2 pr-4">Step</th>
      <th className="text-left font-semibold py-2">Sub-step</th>
    </tr>
  </thead>
  <tbody>
    <tr className="border-b border-gray-200">
      <td className="py-2 pr-4">Scope</td>
      <td className="py-2 pr-4">Thread-level</td>
      <td className="py-2">Within a step</td>
    </tr>
    <tr className="border-b border-gray-200">
      <td className="py-2 pr-4">Validation</td>
      <td className="py-2 pr-4">Contract rules</td>
      <td className="py-2">No validation</td>
    </tr>
    <tr>
      <td className="py-2 pr-4">Notifications</td>
      <td className="py-2 pr-4">Can trigger events</td>
      <td className="py-2">No events</td>
    </tr>
  </tbody>
</table>

### Using Sub-steps

<CodeGroup>

```javascript JavaScript
await thread.step('payment_processing')
  .subStep('validate_payment', { cardType: 'visa' })
  .subStep('check_fraud', { fraudScore: 0.15 })
  .subStep('process_transaction', { txnId: 'TXN-456' })
  .addContext({ amount: 150.00 })
  .success();
```

</CodeGroup>

### Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `name` | string | required | Sub-step name |
| `data` | object | `{}` | Sub-step data |
| `status` | string | `'success'` | `'success'` or `'failed'` |

### Best Practices

- **Logical grouping** - Sub-steps should be related to parent step
- **Don't overuse** - Not every operation needs a sub-step
- **Clear naming** - Describe the specific sub-operation
- **Consistent patterns** - Use similar sub-step structures across steps

### Next Steps

<CardGroup cols={2}>
  <Card title="Working with Contracts" icon="file-contract" href="/core-concepts/working-with-contracts">
    Enforce workflow structure
  </Card>
  <Card title="Querying Steps" icon="database" href="/core-concepts/data-retrieval/querying-steps">
    Query sub-steps and analyze performance
  </Card>
</CardGroup>
