---
title: References
description: Linking threads to external system identifiers
---

**References** link threads to external system identifiers like order IDs, customer IDs, or support tickets. They enable you to query threads using identifiers from your existing systems.

### Reference Types

- **Order IDs** - E-commerce order numbers
- **Customer IDs** - Customer account identifiers  
- **Support Tickets** - Zendesk, Jira, Salesforce ticket numbers
- **Transaction IDs** - Payment processor transaction IDs
- **Application IDs** - Loan applications, insurance claims
- **Custom IDs** - Any business-relevant identifier

### Reference Properties

- **Key** - The reference type (e.g., "order_id")
- **Value** - The actual identifier (e.g., "ORD-789")
- **Thread association** - Links to a specific thread
- **Queryable** - Can be used to find threads

### Adding References

<Tabs>
<Tab title="Node.js">
```javascript
// Add references at thread creation
const thread = await connection.start('order_fulfillment', 'merchant', {
  external_refs: {
    orderId: 'ORDER-12345',
    customerId: 'CUST-789',
    stripePaymentId: 'pi_abc123'
  }
});
```
</Tab>
</Tabs>

### Querying by References

<Tabs>
<Tab title="Node.js">
```javascript
// Query threads by reference
const threads = await connection.getThreadsByRef({
  refKey: 'orderId',
  refValue: 'ORDER-12345'
});

// Find by customer ID
const customerThreads = await connection.getThreadsByRef({
  refKey: 'customerId',
  refValue: 'CUST-456'
});
```
</Tab>
</Tabs>

### Use Cases

#### Customer Support
- Support agent gets ticket: "Where's my order?"
- Query by order ID → Find thread → Show complete execution

#### Operations
- Monitor specific high-value orders
- Track problematic customer accounts
- Investigate transaction failures

#### Analytics
- Correlate thread data with business metrics
- Link execution patterns to customer behavior

### Best Practices

- **Add early** - Add references as soon as they're available
- **Use consistent keys** - Standardize reference names across services
- **Multiple references** - Add all relevant identifiers
- **Business context** - Use IDs that teams already recognize

